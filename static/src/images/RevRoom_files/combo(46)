YUI.add("hermes-lang-featured-banner",function(a,e){a.Intl.add("hermes/featured-banner","en-US",{CHANGES_ARE_COMING:["Changes are coming to the way you log into Flickr!"],UPDATE_YOUR_EMAIL:["Update your email address to get started"],UPDATE_YOUR_LOGIN:["Update your login now"],WE_HAD_TROUBLE_PAYMENT:["We had trouble processing your credit card."],PLEASE_UPDATE_PAYMENT_PAST_DUE:["Please update your payment method to avoid losing Pro."],EXPLORE_IMPROVED:['Explore has been improved. <a href="',"${learnUrl}",'" target="_blank" class="learn-link">Learn more about the changes</a> and <a href="',"${feedbackUrl}",'" target="_blank" class="feedback-link">share your feedback</a>.'],COVID_19_HEADER_BANNER:['Staying inspired during the COVID-19 pandemic: <a href="',"${groups}",'" target="_blank" class="groups-link">Groups for inspiration</a> and <a href="',"${financial}",'" target="_blank" class="financial-assistance-link"> financial assistance options for photographers</a>.']})},"@VERSION@",{requires:["intl"]});YUI.add("footer-full-view",function(e){var t=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],n={"en-US":"English","de-DE":"Deutsch","es-US":"Español","fr-FR":"Français","ko-KR":"한글","it-IT":"Italiano","pt-BR":"Português","vn-VN":"Tiếng Việt","id-ID":"Bahasa Indonesia","zh-HK":"繁體中文"};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return""===this.get("container").get("innerHTML")&&this.setContainerHTML('<div class="footer-full-content"></div>'),this.appStateParams=e,this},loadState:function(){var i,a,s;for(s=this.appContext.auth&&this.appContext.auth.csrf?this.appContext.auth.csrf:"",this.lang=this.appContext.lang,this.menuLangs=[],"vi-vn"===this.lang.toLowerCase()&&(this.lang="vn-VN"),this.selectedLang={code:this.lang,name:n[this.lang],csrf:s},i=0,a=t.length;i<a;i++)t[i]!==this.lang&&"string"==typeof t[i]&&this.menuLangs.push({code:t[i].toLowerCase(),name:n[t[i]],csrf:s});return e.Promise.resolve()},buildContainer:function(){var t={};return this.get("viewer")&&e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))}),t={displayLangs:this.displayLangs,selectedLang:this.selectedLang,helpLocaleKey:this.selectedLang.code.replace("-","_")||"en_US",menuLangs:this.menuLangs,adobeAnalyticsUrl:e.config.flickr.adobe.analytics.url,showCompany:"en-us"===this.appContext.lang.toLowerCase(),isSOHP:this.appStateParams.isSOHP},YUI.Env.isServer?t.pageUrl=this.appContext.request.url:t.pageUrl=window.location.pathname,this.setContainerWithTemplate("footer-full",t),this},activate:function(){var t,n,i=this,a=this.get("container");return this.menuLangsFormatted=this.menuLangs.map(function(e){return{href:"/change_language.gne?lang="+e.code+"&csrf="+e.csrf,text:e.name}}),this.registerEventHandler(a.delegate("click",function(a){t=a.target.ancestor(".lang-switcher",!0),n=t.one("a"),a.preventDefault(),n.addClass("dimmed");var s=new e.Views.FluidDroparound({anchorOffsetHorizontal:15,appContext:i.appContext,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:t.one(".arrow"),classList:["lang-droparound"],menuItems:i.menuLangsFormatted});s.show(),i.registerEventHandler(s.on("closeDroparound",function(e){n.removeClass("dimmed")}))},".lang-switcher")),this.footNode=a.one(".foot"),this.bannerContainer=a.one(".foot-banner-container"),this.isBannerFixed=!1,this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.updatePositioning.bind(this))),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",this.updatePositioning.bind(this))),this.registerEventHandler(this.appContext.bannerManager.on("renderBanner",function(e){var t,n,a;if("footer"===e.placement)return t=e.bannerView,n=t.get("container"),(a=i.bannerContainer).empty(),a.appendChild(n),t.on("subviewActivated",function(){i.get("isCSSLoaded")&&i.updatePositioning()}),t.on("dismissed",function(){t.get("container").remove(),t.destroy(),i.get("isCSSLoaded")&&i.updatePositioning()}),t.normalizedActivate()})),this.onCSSLoaded(this.updatePositioning),this},updateBannerPosition:function(t){var n=e.config.win.scrollY+e.config.win.innerHeight,i=this.footNode.getY();this.isBannerFixed&&n>=i?(this.bannerContainer.removeClass("fixed"),this.isBannerFixed=!1):!this.isBannerFixed&&n<i&&(this.bannerContainer.addClass("fixed"),this.isBannerFixed=!0)},updateBottomPadding:function(t){this.footerHeight=this.footNode.get("clientHeight"),e.one("#content").setStyle("padding-bottom",this.footerHeight+this.bannerContainer.get("clientHeight")-1)},updatePositioning:function(){this.updateBannerPosition(),this.updateBottomPadding(),e.fire("footerFull:positionUpdated")}})},"@VERSION@",{requires:["flickr-view","hermes-template-footer-full","url-helper","dropdown","footer-banner-view","fluid-droparound-view"],langBundles:["common"]});YUI.add("album-page-view",function(e,t){var i=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.isOwner=e.isOwner,this.isTwitterbot=e.isTwitterbot,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,e.id=e.albumId,e.modelRegistryName="set-models",e.maxNumAttrName="totalCount",this.pageParams=e.pageParams,e.photoListConfig={modelParams:{registryName:"set-models",modelIdOrAttributes:e.albumId,collectionAttributeName:"photoPageList"},parentName:this.name,pageParams:e.pageParams,contextSuffix:"album-"+e.albumId,measureAFT:!0,maintainScrollPosition:!1,scrollToWithId:e.withPhotoId},e.photoListConfig.layout={targetRowHeight:"justified"===this.albumPhotoListLayoutStyle?190:430,fullWidthBreakoutRowCadence:"justified"===this.albumPhotoListLayoutStyle?null:3,awakeBoundsToViewportSizeRatio:5,containerPadding:{top:4,right:0,bottom:4,left:0},itemSpacing:{horizontal:4,vertical:4}},this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"album-toolbar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"album-header-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"pagination-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,disabled:function(){return!this.pageParams.viewPageSize}},"signup-footer-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},loadState:function(){var e=this;return this.appContext.getModel("set-models",this.albumId).then(function(t){e.set("albumModel",t)})},buildContainer:function(){return this.setContainerWithTemplate("album-page"),this},buildHeadContainer:function(){var t,a,o,r,l=this.get("albumModel"),s=l.getValue("photoPageList").getList(),n="summary_large_image",u=[],h=(this.pageParams.nominalPage-1)*this.pageParams.viewPageSizeForShare||0;if(this.isTwitterbot&&s.length-h>=4)for(n="gallery",o=0;o<Math.min(s.length-h,4);o++)if(s[h+o]){var m=s[h+o].getSizeToFit({width:640,height:640});m&&m.url&&u.push({property:"twitter:image"+o,content:m.url})}else i.error("Missing album photo in album list",{index:h+o});l.registry?t=l.registry.getSizeToFit(this.albumId,{width:640,height:640}):i.error("Missing album model registry"),r=l.getValue("url").replace(/\/albums\/([0-9]+)/i,"/sets/$1"),a=this.templates("dynamic-page-head")({title:l.getValue("title"),description:l.getValue("description")||this.intlMessage({intlName:"album-page.OPENGRAPH_DESCRIPTION",owner:l.getValue("owner").getValue("displayname")}),url:l.getValue("url"),fullURL:e.url(r),openGraphImageURL:t?e.URLHelper.addProtocolToURL(t.url):"",openGraphaImageWidth:t?t.width:"",openGraphaImageHeight:t?t.height:"",ownerURL:l.getValue("owner").getValue("url"),twitterCardType:n,twitterImages:u,ogType:"article",domain:e.url(),feeds:[{title:this.intlMessage({intlName:"meta.ALBUM_ATOM_TITLE",username:l.getValue("owner").getValue("displayname"),albumTitle:l.getValue("title")}),url:"/services/feeds/photoset.gne?nsid="+l.getValue("owner").getValue("nsid")+"&set="+l.getValue("id")+"&lang="+this.appContext.lang.toLowerCase()+"&format=atom"}]}),a+=this.templates("head-meta")({isName:!0,metaName:"robots",metaValue:"noarchive"}),a+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, viewport-fit=cover, initial-scale=1, maximum-scale=1"}),a+=this.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:"noarchive"}),YUI.Env.isServer?this.set("headContainer",a):(this.set("headContainer",a.concat(this.subviews["pagination-view"].get("headContainer"))),this.updateHead())},activate:function(){var t=this,i=this.get("albumModel"),a=i.getValue("isOwner");return e.later(100,this,function(){e.use("photo-page-scrappy-view")}),e.on("albumToolbarView:layoutChange",function(e){var i=t.subviews["photo-list-view"],a=i.photoListLayout;a.targetRowHeight="justified"===e?190:430,a.fullWidthBreakoutRowCadence="justified"===e?null:3,i.setItems(t.get("albumModel").getValue("photoPageList").getList())}),a||this.appContext.getViewCounter().recordAlbumView({albumOwnerID:i.getValue("owner").getValue("id"),albumID:i.getValue("id"),referrer:this.appContext.getReferrer()}),this},onSubviewEvent:function(e,t){t&&"newPhotoAddedToAlbum"===t[0]&&this.subviews["photo-list-view"].setItems(this.get("albumModel").getValue("photoPageList").getList())},getTrackingSegments:function(){return{couldHaveSeenAd:!this.get("albumModel").getValue("owner").getValue("isPro")&&!this.appContext.getViewer().isPro,vwrOwner:this.isOwner?1:0}}},{ATTRS:{spaceid:{value:792600538}}})},"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","set-models","hermes-template-album-page","hermes-template-dynamic-page-head","hermes-template-head-meta","hermes-template-head-link","album-toolbar-view","album-header-view","photo-list-view","footer-full-view","url-helper"],langBundles:["album-page","meta"]});YUI.add("album-privacy-models",function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ListFetchers["flickr-photosets-getPhotos"].run(e,this.appContext)}},attributes:{totalCount:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},hasPhotosPrivate:{readOnly:!0,derivedBy:["totalCount","countPhotosPublic"],defaultFn:function(t){return this.getValue(t,"totalCount")-this.getValue(t,"countPhotosPublic")}},countPhotosFamily:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},countPhotosFriend:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},countPhotosFriendFamily:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},countPhotosPublic:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photosets-getPhotos-fetcher"]});YUI.add("hermes-lang-meta",function(e,o){e.Intl.add("hermes/meta","en-US",{PHOTOSTREAM:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"photo on Flickr!",other:"${#} photos on Flickr!"}}],PHOTOSTREAM_NO_PHOTOS:["Explore ","${username}","'s photos on Flickr!"],ALBUMS_LIST:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"album on Flickr!",other:"${#} albums on Flickr!"}}],ALBUMS_LIST_NO_ALBUMS:["Explore ","${username}","'s albums on Flickr!"],FAVORITES:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"favorites on Flickr!",other:"${#} favorites on Flickr!"}}],FAVORITES_NO_PHOTOS:["Explore ","${username}","'s favorites on Flickr!"],META_DESCRIPTION_BY_USER_ON_FLICKR:["By ","${username}"," on Flickr"],PHOTOSTREAM_ATOM_TITLE:["Flickr: ","${username}","'s Photostream Atom feed"],FAVORITES_ATOM_TITLE:["Flickr: ","${username}","'s Favorites Atom feed"],GROUP_POOL_ATOM_TITLE:["Flickr: ","${groupName}","'s Photos Atom feed"],GROUP_DISCUSSIONS_ATOM_TITLE:["Flickr: ","${groupName}","'s Discussions Atom feed"],ALBUM_ATOM_TITLE:["Flickr: ","${username}","'s \"","${albumTitle}",'" Atom feed']})},"@VERSION@",{requires:["intl"]});